<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>



    <script>
        //实例化
        const p = new Promise(function (resolve, reject) {
            setTimeout(function () {
                let data = '数据库中的用户数据';
                //resolve
                // resolve(data);
                let err = '数据读取失败';
                reject(err);
            }, 1000);
        })

        //调用promise对象的then方法
        p.then(function (value) {
            console.log(value);
        }, function (reason) {
            console.log(reason);
        })

        //ajax
        const pr = new Promise((resolve, reject) => {
            //1.创建对象
            const xhr = XMLHttpRequest();
            //2.初始化
            xhr.open("GET", "");
            //3.发送
            xhr.send();
            //4.绑定事件处理响应结果
            xhr.onreadystatechanfe = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status >= 200 && xhr.status < 300) {
                        resolve(xhr.response);
                    } else {
                        reject(xhr.status);
                    }
                }
            }
        })
        pr.then(function (value) {
            console.log(value);
        }, function (reason) {
            console.error(reason);
        })

        //then方法的返回结果是promise对象，对象状态由回调函数的结果绝对
        //如果返回非promise，状态成功，返回值为成功的值
        //如果返回promise对象，状态以内层为准
        //链式调用
        pr.then(value => {
            return new Promise((resolve, reject) => {

            })
        }, reason => {

        }).then(value => {

        }, reason => {

        })
        //catch语法糖
        p.catch(reason => {

        })

        let s = new Set(['大', '小', '好', '小']);//集合
        console.log(typeof s);//对象
        s.size();
        s.add('中');
        s.delete('好');
        s.has('小');


        let arr = [1, 2, 3, 4, 4, 5, 6, 6];
        //数组去重
        // let result = [...new Set(arr)];
        //交集
        let arr2 = [4, 5, 4];
        // let result = [...new Set(arr)].filter(item => {
        //     new Set(arr2).has(item);
        // });
        //并集
        // let union =[...new Set([...arr1,...arr2])]; 
        //差集
        let res = [...new Set(arr)].filter(item => {
            !(new Set(arr2).has(item));
        })

        //Map 键值对的集合，键的范围不限于字符串和对象
        let m = new Map();
        m.set('name', 'tjh');
        m.set('ji', () => { console.log('寄！'); });
        m.size();
        m.delete('name');
        console.log(m.get('ji'));
        //遍历每个元素是一个数组，每个数组俩元素（键，值）

        //class 类 看作语法糖
        // function Phone(brand,price){
        //     this.brand = brand;
        //     this.price = price;
        // }

        // Phone.prototype.call = function(){
        //     console.log('打电话');
        // }

        //实例化
        // let Xiaomi = new Phone('小米',1599);
        class Phone {
            //构造方法
            constructor(brand, price) {
                this.brand = brand;
                this.price = price;
            }

            call() {
                console.log('打电话');
            }
        }

        // let X = new Phone('小米6x','1599');

        //静态成员
        // function Phone(){

        // }
        // Phone.name = '手机';
        // Phone.change = function(){ //属于函数对象的静态成员变量
        //     console.log('呼叫');
        // }

        class SmartPhone extends Phone {
            constructor(brand, price, color, size) {
                super(brand, price);
                this.color = color;
                this.size = size;
            }

            //get set
            get price() {
                console.log('价格');
            }

            set price(newV) {
                this.price = newV;
            }

        }

        let sp = new SmartPhone;
        console.log(sp.price);
        sp.price = 1599;

        // function equal(a,b){
        //     if(Math.abs(a-b)<Number.EPSILON){
        //         return true;
        //     }else{
        //         return false;
        //     }
        // }

        let b = 0b1010 //二进制
        let o = 0o777 //八进制

        Number.isFinite(); //是否是有限数
        Number.parseFloat();
        Number.parseInt();
        Number.isInteger();
        Math.trunc(); //小数部分截掉
        Math.sign(); //判断正，负，0

        //1.Object.is 判断两个值是否完全相等
        Object.is(NaN, NaN); //true
        console.log(NaN === NaN); //false
        //2.对象合并
        Object.assign() //重名后面会覆盖前面的
        //设置原型对象
        const school = {
            name: '楚寰'
        }
        const city = {
            xiaoqu: ['孝感', '孝南']
        }
        Object.setPrototypeOf(school, city);



    </script>
</body>

</html>